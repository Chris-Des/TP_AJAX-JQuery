$(document).ready(()=>{let e=$("#email"),s=$("#password"),t=$("#username"),r=$("#submit");function a(e){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e)}function l(e){return e.length>=5}function n(){let n=e.val(),i=s.val(),p=t.val(),o=a(n),u=/(?=.*[A-Z])/.test(i)&&/(?=.*\d)/.test(i)&&/(?=.*[!@#$%^&*()])/.test(i)&&i.length>=10,d=l(p);o&&u&&d?r.prop("disabled",!1):r.prop("disabled",!0)}function i(e){let s=$("#lengthName-requirement");e.length>=5?(s.text("✅"),$("#username-requirements").css("display","flex")):($("#username-requirements").css("display","flex"),s.text("❌"))}function p(e){let s=$("#uppercase-requirement"),t=$("#number-requirement"),a=$("#special-char-requirement"),l=$("#length-requirement");/(?=.*[A-Z])/.test(e)?($("#password-requirements").css("display","flex"),s.text("✅")):($("#password-requirements").css("display","flex"),s.text("❌")),/(?=.*\d)/.test(e)?($("#password-requirements").css("display","flex"),t.text("✅")):($("#password-requirements").css("display","flex"),t.text("❌")),/(?=.*[!@#$%^&*()])/.test(e)?($("#password-requirements").css("display","flex"),a.text("✅")):($("#password-requirements").css("display","flex"),a.text("❌")),e.length>=10?($("#password-requirements").css("display","flex"),l.text("✅")):($("#password-requirements").css("display","flex"),l.text("❌"));let n=/(?=.*[A-Z])/.test(e)&&/(?=.*\d)/.test(e)&&/(?=.*[!@#$%^&*()])/.test(e)&&e.length>=10;n?r.prop("disabled",!1):r.prop("disabled",!0)}e.on("input",()=>{e.val(),n()}),s.on("input",()=>{let e=s.val();p(e),n()}),t.on("input",()=>{let e=t.val();i(e),n()}),n(),$("#inscriptionForm").submit(e=>{e.preventDefault();let s=$("#username").val(),t=$("#email").val(),r=$("#password").val();if(!a(t)){alert("Veuillez entrer une adresse email valide.");return}$.ajax({type:"POST",url:"../controllers/post.php",data:{username:s,email:t,password:r},dataType:"json",success(e){if(console.log(e),!0===e.success){$("#success-message").css("display","block"),$("#success-message").text(e.message),setTimeout(()=>{window.location.href="../pages/connexion.php"},3e3);return}$("#error-message").css("display","block"),$("#error-message").text(e.message)},error(e,s,t,r){console.log(`${e.responseText} ${s} ${t} ${r.message}`),$("#error-message").css("display","block"),$("#error-message").text(r.message)}})})});